[tox]
envlist = py27, py35, py36, py37, pypy

[testenv]
commands =
    pip install -U pip
    pip install -e .[all]
    python setup.py test

[flake8]
exclude=
    .git,
    __pycache__,
    docs,
    .eggs,
    .venv,
    .tox,
    .vscode,
    .idea,
    .pytest_cache
    setup.py
max-line-length = 88

[coverage:run]
omit=
    flask_security/script.py
    flask_security/babel.py

[pytest]
addopts = -xrs --cov flask_security --cov-report term-missing --black --flake8 --cache-clear
flake8-max-line-length = 88
flake8-ignore =
    tests/view_scaffold.py E402
    W503 #W503 is incompatible with PEP8 (https://github.com/python/peps/commit/c59c4376ad233a62ca4b3a6060c81368bd21e85b)
markers =
    changeable
    settings
    confirmable
    registerable
    two_factor
    recoverable
    passwordless
    babel
    trackable
